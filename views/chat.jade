extends layout
username= username

block content

  form#chat-input.form-inline(action="")
    input.form-group(id="m" placeholder="Message"  )
    button.btn(type="submit")
  #messages
    
  script(type="text/javascript").
    userName="#{username}";
    var socket = io();
    $('#chat-input').submit(function(){
      socket.emit('chat message', {
        "username" : userName,
        "message" : $('#m').val()
      })
      $('#m').val('');
      return false;
    });
    socket.on('chat message', function(data){
      $('#messages').append($('<p>').text(data.username + ": " + data.message));
    });
    socket.on('system message', function(data){
      $('#messages').append($('<em>').text(data.username + data.message));
    });
